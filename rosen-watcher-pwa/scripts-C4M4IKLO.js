typeof importScripts=="function"&&(importScripts("./ngsw-worker.js"),self.addEventListener("install",d=>{console.log("[Service Worker] Installing new version...calling skipWaiting()"),self.skipWaiting(),console.log("[Service Worker] Installing new version...done skipWaiting()")}),self.addEventListener("activate",d=>{console.log("[Service Worker] Activated new version!")}));const processEventServiceSingleton=(()=>{console.log("Initializing ProcessEventService singleton factory");let d=null;return()=>(d||(console.log("Creating new ProcessEventService instance"),d=new ProcessEventService(new ServiceWorkerEventSender)),d)})();self.addEventListener("message",async d=>{const e=processEventServiceSingleton(),a=d.data;console.log(`Rosen service worker received event of type ${a.type}`),e.processEvent({data:a.data,type:a.type})}),self.addEventListener("message",async d=>{const e=d.data;console.log(`Rosen service worker received event of type ${e.type}`)});var ChainType;(function(d){d.Ergo="Ergo",d.Cardano="Cardano",d.Bitcoin="Bitcoin",d.Ethereum="Ethereum",d.Binance="Binance",d.Doge="Doge",d.Runes="Runes",d.Nervos="Nervos",d.Handshake="Handshake",d.Firo="Firo",d.Monero="Monero"})(ChainType||(ChainType={}));function getChainTypes(){return Object.values(ChainType)}function getActiveChainTypes(){const d=new Set,e=a=>{for(const[s,t]of Object.entries(a))t&&d.add(s)};e(permitAddresses),e(permitTriggerAddresses),e(permitBulkAddresses),e(rewardAddresses);for(const a of Object.values(rwtTokenIds))a&&d.add(a);return Array.from(d)}const chainTypeTokens=Object.fromEntries(Object.values(ChainType).map(d=>d===ChainType.Runes?[d,"rspv2BitcoinRunesRWT"]:[d,`rspv2${d}RWT`])),chainTypeWatcherIdentifier=Object.fromEntries(Object.values(ChainType).map(d=>d===ChainType.Runes?[d,"rspv2BitcoinRunesAWC"]:[d,`rspv2${d}AWC`])),rwtTokenIds={"8a94d71b4a08058327fa8372aa69d95c337536c6577c31c8d994169a041e5fc0":ChainType.Ergo,ddb335d2b4f3764ddeae8411a14bec97f94d0057628bb96f98da9d95e74d02bc:ChainType.Cardano,"30e4392fc439fce9948da124efddb8779fe179eef5a5d6196e249b75ee64defc":ChainType.Bitcoin,f5985c64c1aa8f08569dc77a046f65f92947abaa9ccd530aead033eece23496e:ChainType.Ethereum,"33477693d6be5bbd3a4cd786fbff5e6444449c191ab08e681aaaa87fc192772c":ChainType.Binance,"5d727b722fb72aa02257d987970c68aeda41614518bab9f0d8a21bbc75b7a3b0":ChainType.Doge,"8bde33c8654ddb525b4db4842dd959e592c3847eabe40383af09a76be36379c4":ChainType.Runes},permitAddresses={[ChainType.Bitcoin]:"NY4PEzZ7VfjtnTN697R7my9uAVkCYb6N71J2RSmJCFSdDqVf9aPvFQqKXujYDBtSA8hxYVUgkGgU9SP2Ss7JDUkHkdGLBqZwH4yDcPyVvbVbcre3o7nR59wiFDVtjzCjfZmVvMVJD9HiW4GKqVuZGTQCKns8tDe3sJoDNTL3VmhzRUPZf9JCN4TNji1ruXf5CxqWtDrCfoxE4xfbRWGmtBMdLMoRdL85V7z1fP5KxroWX5YgZQo28nTCU3WjPuY2YrjqYYGNHXvFZ9G8E85kCcseNtRWqViXGFzmwqHWKaYe4AdJzBbMKzJWYszsbiemNvisPtT2Yj3FjAmAErpW3gMeWyH3WtbipaAu9D31ggpLeLkLTGscJ9HB2oExpGWvv6u9mGdkTJMHYUuZJUGrcJPE3m7ZTEFxwkbeR9oD8nHHgW4SB46kHFbxzNoUksGPZQnxf95J3e5PUnhYgg7mrQLNpq6pphgGukFcHDgAN2rgFmUSDVsuzomhP735SMiveXSPzx6PZeP7CmrEHyXN6mFbBJuY17kvzzix1w9eFwryZDuZqnAANkYhF3TLkLyGZfSC4o9iAGynpivuNMUgbKAuj6D116tKoCq9PHELL8eTefmXNLFuhauQuKRjmWQKj9zYSd7qi6Zf49KX25PnWHkC3REc4abYpjtiQFefT2HkWRwneTCkJ8uMvoHs6kJzLg8NVzH8XwEZhTM2tNSDhBKZaURpYiQcHwLDgv5uFiwhasLAdZi2EJywBYX51NKc6m4MEsTiAJC9jkEydWcwyDzSHN18yEr4rvEgMNkUhLHJokgV2v3BNFhUTJqe58e2QXAmx9MytUDqzg3vwexEpMhueC2roYA27P1mmb85HKEz15a8LnuUT8ZjmG8kDbHuPYFyxcATytVuDrFDzqKBt9X36bocip4ZU4RRY8JcWjJvMcrBCjV3EhDVQ4it8bhoZnn79PsXazvDteua1NEYEJniPnNrRaiKTUWrseEUQ2vVjWy134jMxRbeiARhoj7MDxug2kFP8jRGSsxWt3Qqbv2SezT3xZ8jYxTyQ2CiyJ61CvUQwPtmoY3XKjrgrJKwnSzJRs4egKPYZKoSiSy6UdHMKuNDmys8wYo3Gi2EgVdUYRLLWcHh5Z2H91odSbTW2h5e6pZeY4a45TgihE6ZnZBhHGc75zJjukhPgP1wEp8GrreHA7ejvTEmpwNgj571x5JrvRD5TxWaFuZKBonGexovAK2L5v",[ChainType.Cardano]:"NY4PEzZ7VfjqPk9gZSNS6ERoYyYBEBebyeXUPs1sjEfdenV3Kq1QKWBSQ1Gfem47fPVRw5UXcYNXtgXNGqsD4DedukcYv5c5kviu94yWpyrh2tbXHea1tyfuEcb8njgvXkAxrXkjvgcPEQqy7BsR3KQPe8vzSaBG5V8WFHQqvHmpMXXYMvKDZzRbNjZUgYvVinGq6qx9hct1fFG15nFdcWZkzhBcu8ytydt3MmnkYEyL4L2rLD8Jp2Q16DfeaBBqmuyxpMoVxPrQzbPjq5GKTKrqnpisWVrubpAy5dg1oQ6tVZompLpwTWvX1xWspA9tWPmc3MCV2e6y313KzSosGLi2Sdv2ptDgJpKamQv6fNKmj3TWkNbPCDfjp2KXYcfYE1vQ5prRZCPCDhVgWP7bqpF3SeUTMJmvBaXjd1tBavjanquQDkYU4n5XBwJPvUa5kCAP1USTgP4cgPA6SzB8hg2RXmB4PmEWM2RWv2mrirYeTdZrzXCbpGCd9B9GK7bNknnYz1X8wVqyYxxQMZ7Rort4BVRNPNKzEMtdGKSmQpiWitfoAfphXL3SGMfwMT3sspgDcD93Ftiq9gf6kgawpFBKWJmV5jXmfiSCWkPW5x56L5hcc3NwJLYYjcMh81aXQBP4HguyudttZcF8QiDa6Ae3idS1BTegArbhZBFn1TQJGgWtuCubLC5Ja71FadEN1G1s4Uz4BapDu3WpNH4NJn3UeWavLd1EytGjevyJu8XjziAMYr6cPZsyhb95aj7LAHgwJ8YT42zWYoDxqhEzbuderVtfauVJxEo2Rt7p83hMtkFS8Dy3vNbdmGEhWEFfDEyquEHTLsYkehRMWTeTeoDpRhKpeXoDxTNriR6Fz6y3Koxwzg281gYhxxvew7TpvSa3cLvjBpNxuoUfhyT645u51cBsQzden3RB5LjJeToSctrx74nNGCm9sR7fQgzno2pETeit1mykq4eocy93EoTcypKitcbfhgAYwXrGcGUQyhsupFgPZMnms5VnWhCsGKkK93uy7z4BRgi9y2aU7zMUxPJN6q3kYhjcdgYhcgqLLmWo5pBRSxcuq3p3NhPnd2Tps5RztjtUS5ZkbRVsTri8Sy2J5xPLir6VB7uxcPCSYYGJaaVfENJ8tYLYH3m3TUoxRipyjNDDBmsRdujqFQvFoYiCyaPFgu9iqzMvuPDM7FDPAKV8V7A895N9SMMZkG7uAzVvLgrU8Wrxdby2CAX9ttmPJn",[ChainType.Ergo]:"NY4PEzZ7Vfjvo3AYu7dBh4ziatarsMAVPnwtHZL6BfoKeaots7P629HvVAmDZNdiVNUitWMqVJhgphUregwCXnhVNRddztP93qbtSWCMzVk1UQmCVUpvQyb25nyH1PrpRSjpFewJWeN3bjiVF6bTAm2t11X4d2fKGnAo3PX2BFVeyAUre7T5CZs2uikxZisyrJ1djE4UY1uwpTFkJv3RzZ3JMugNDeicf7qWqtCtNH8E9uG56VD2dMvmsr5YHQbrKgxa5foyA4K8cD59o2ub9ezbhjSgfXbc6VLaXmp5SzdP6n61MaePNexedifBWwAsHFcaaVXf7oUkePp5dDpc5mBbaAuidBAwH4SaxnUNjPw2bHVSXEk3ZJwwBrZRG7CYBCvEN6wFuPyzuhGsJQwdCtvUqxViGhxWrhRYKwixLhScVdGwCFCF9HjuCXt92FkEZKRk1kJuNzMUuc9AUbafbwhi8RC96TVQrtnsajhomptLKFmQXg4nZQao3jwHV8kfZeyF9BX5kiWUnC83Wa7X7seGUcECHRPLAapk7Lr1kUQ6Q62RpBKeGUsfmPcyNhaZ2bmdxMxxHAhdZdKVr78R5ch2BvG7ZtV6wkHB1hcVJGJmU4dskPPR5EFd8gED72eeUnNAsTknW7ePfNMj4DYWGqf2QhPHDZXsyRN2Mczv4tgyRsNA2HR3U9oZikejcuYhha9yNsXEdNn23B8wa5aDZwR6hwZ9hQ74yv29sbfBAfe9XWT2UZAVaeZeazQSSrvAhicEKnwmCAvfwcZNS57SHJ1EfZf1oEt66S6mGFdBzcKPLZzmJmCgMiBmMThqMemT1XS1ovES76LVcpXSkyiEdA17htR5HuPWdDVfWNQAK2jAM8BjKGtvsh93oMFGvMaBVBAvj1QcfTr17LdeeT7h78bKzyF5SQWuyu46xtDbmTZVrR1ZSpnffiD8TbWnae85Bw1VfttScQ8yfa26dsc9pwLrHhYhC4XKEVPWYUxLHZd959tLA2kGNkJBJR8PPThR8PugaUTq1sQpLg4ezPPUjYyWFvhFf6Rcw5rcJAwj99AUwoEhPaUnxT3TxiEJBbD3Zsna33mQD9Zg69Zzr9xiLA7GzhhA998dwkpbbgqFxyASwH6yav5qDbXPZH7GPtt3nTjUfRs87SGYgVGHoGhqaVUAfQKW4TtvFicdpvQws5kg1nZthd7WkWcR7HqLc1R4wBPFynFVGc457vhQwaP78yQsQDHq86",[ChainType.Ethereum]:"NY4PEzZ7Vfju59RSazdQK92s7PaLrnCh5D9yZBZx7fptQjQZ7Ra2Xiz1PFusrkij3YamVoqXNqoUzazpjnzwmX4zKvPwWGLdqk1RXvp82m7Km2nwtvL2d6tVVCfgiVzA392JszEtNDh9hNXn6wk8eXjXwUg1q1w4UJi6XzmscSH6iZ1BR6ghCp5fyrZBeUfnvbPsfgHmmoVQzmDJ5E9KjmCg53detrDH29gyZUKyqjC5ddnCKG5cvVmoZ7D2ix9KFa9RuLcpVTxnVnuoJnHL1yoGog11TB3eT5hRyiUzeBU688pMb1xyUaCw8bjh5wSsBRAWQnDiAaGuj6zsJEnKeMW94XLeaTASw4K2bwyWHr4BVN9XNSeopFoj6mXPrD2ZhGgPV4HeQp1qEQ2pemMiSecXYkghfnk1t8hnfDNMfXoyKXxEmN8Cf1p7M8pqtgo7H9uUi6xsfotsB2uHVSoT21nzERYMaej9YuYwgC2iUzrzeZNFu7LbMqBErDgHn4wfgppRnF6axDca7QJGNv3q7E2q1DGRpzmTXPfr9FeFxki9geAwsTAy1KTqU2u6TY2wcRC3GzQz83x6LatZLhf9HZnVWZ3SRWQ5AmKUfxhHVxVC9Hwiraqb7ciZBsrnXHWmFaHHHYxafZwoLUBqxeWnHNM211MUwJ2rD9pvrqREfYs4CKYJNDxe5nezL11TnsLyt6p6XkKgHXvvqnk9HQ27pMbpNVX33Y8iQpznFvL2YBCn6Dw9hBDgb8thcYkkAXyLRZskEmhXQFL9evXTstNoeJVJp7NAo7dejZRaKHzTvZnZpkybJGks44qFbGSuSXGegN1V1HWyYGnGSgEJm3yrapNC5tdTvHWXVDxjw1G2TwqKL8D4HZVsyWsu8PEErsaf593jscXKTRn2uqvdhp29rJKGV4v2Cfd8DDXzwhmVxcVFyUiXg9JDe8fCi2rxmFai7a6P6vTJrUkJRtKYBt5RUY3uzKXpX4J4fBWMHmnM2yTSgdaXb9MYULmsbWitqpxiTWh1iMQdXNHxU1A2hHvsqogqEhrG9bGmMU1m1EFSFAPocv3KUf5bPYUWmVUFaxa2MLmE4fs1EC3kCJz8434NrxD1YVA1iosiv5f2tDM8E3w15VRik2a3R1Y6C1D9uHAAT1XK1A27dnx6e586eghm5BuvCY9Di89bdYH5KX3sg4NzWAAJYd5DLZbtdXxzRrKiKwMcPjskhwyQRcv3qstVzPDfJdE8Ej",[ChainType.Binance]:"NY4PEzZ7VfjvyhUfALrnVnmbCo79cESCRMoD4m6TNTRdUnGR3B7EM3KRKxPh6BmdAsdArGV8DgAanEjs4QLYzYTBPGexkgMBPaRwAMSuVAG5rtzuN5qNmyAZsfdrR3cnBuspTqRkBQFp1oczXkCVNFdjpPwAFYLZgnnJFJVnZbp5TQSECTioxM1oJSKm7LBnEbPNrVWFqcShvqAjoyie7Bd471mNEq8y3mEeV7FH3AQCm4fKQgyfwYkRBC4jvFjWDaMshpFbV325g7n5rcyRsbXJ8EGMC2pKVGEbkx2JCgX4ba5dxx1uGibiHnuHiTNXLmrbEJ6BFtBFZB69Ye7U1C23uBEEvTRLteSbKzKAaGv7UbhVtvcgX91muR3sy7jXTW5FszKWej7knHLWJhbUf47fCVvmbXWEx6rHu3fj5hEqQyfVuER3J54yQAtP9ertP9hQX6GQ7mXfyUwmxTYiJS4GxLzeWZGwfSfRUDe6GN7qurja8kVeMrTwdo835yt4XUcemLK53TCkTLe61Bev6NtiUCSuNrhddXcdfMzqk1DWZCXhkcm51pnGmbmAntwC6AF7rL2LHtHi4et2edKAJHkYUp6t9a8Q57eL6fX3Q4JSfDrjfgn4x2fJaF1APdwbBVKoJyhDUkmV6xAaANYZifq54eFg1qBh54F6mu61U3Df5sZqsepzQJNYp6Y95afLuHGmG97mxhmmRsecKbamu4p6P3TPZEs5eYfHspVf85GNh2BztxxYn5hSsR9c8VRJjBhHR1qGHzX4mbRKWn2D41L7AHPnapSQyHCAPdhSbaAV3b6eLqLvc9QrFBAdnsHqN4NauYDPZc6sSrFuLEwNKFbjefc7pBDnA2pfTUUVqCTFuuaM8VmLKFxG2oVsi1k8GD5moSzQbEphVfWTjE9kTZR35oArptsctXGXRT6MXToom6m4cj465Xs9nsRY8t7FgSHsxetJafgogRjo8NRpgFkBpRgf69QuZbqYkrFMTsoDRkLYCLTF4XZwYzu3tqrzLkSZPKDzK1x7pySFdB56vAstU8HPHLqtzduvHt8Gvrkh1mAYQ1cEphCF1jfs5vZUDifLQYnZ2JiJeMdFZu8RhssWvwU2oL6wqx4Ey2iRaSrLSadYnWx47QvGZeZ8M5gupYMNiL7tTkpCjMjbuetqGcpQrtiwuBJ25DqfnWeLN2K6LS49Fb7GjW6Y3fMgdDYVhh7MFpLiyHMcC7wzdBJSMEcE1VNvo2",[ChainType.Doge]:"NY4PEzZ7VfjpDKVcQkzdi4CLcgbMvUX53reQKShv8wRAJ8cRsEi4zV8VwevNM5JPxi5UA77685CKHAQAEkE5HUX2jv5HoMoaZFqcYNBQmHxLA86pS3fHDhg6GvJ8SHssoUZX4uGcgEcRt118Bz8bR8sVAGC23UcafXEwmhfCRfrijjPxDx9ZLHN14uuCU9Gv8Upta65PkzbE3oTD3XDuq7RicN59bz8o6eHef9MfxZetNXrgGTkCJJVJrQ5ahqPLmCzkwv5iXLvRjebbPcen8FxPJ7RDE9rG5BW4uuyroqH6nsNcQKRDnvvnrt5PjghRfss4EswpEJXoxxf7VxYUxx2KgHy8W865bjV5Gvmd9nLPnRStwDV7t7HP2U98fMH3Qdp8PS2Vew5edCjjZTiu2k5kB8frNwSdhGvu91TpAhen474RoxWeoZErNRPpkBH3MN4vHo7EZYiJPjsYtLctVEDWZkvFuaFCYQbuF73JqT7673erYxjRu5o3bCHMgNLYPYuriHLyWtpAJvkFa2Xir54tNfMFyEcvPEWYWaB7J8JsBa8E1b6v9x3VsDyNrU3bGXz52Ax7dG5ziTX1DG2bZuRvGSejjeP8GVgUXTBvRARs8t4wKwdicHkZVie2zGBR5w6Ajo1wK8hNHi2ANYSX5VEFEAFgjwo8DNMUTXbyreeKTcJgcntoc1CbNaiDUvJEyRYaAS7mncPsAiuMjTiFUAzRU5gWdtgRTrkVfi638QrvsvKQgKNPxvGBQpEWtSnmDfRhFifDT716wZ22rca55i9V2ArmDRVZG966MSTYNewX96iwndT8PDhhR4xfysMrTdQMPBzFXGoaAyV54rZ37G1JHQjKQLdMXLP67wjqFMNDRjBUsUYpBYVgj4XpvA1nik8UDqGW5zHoEszpjFJNCSzoexM1zLk8q5vk73dfQ3zaME7tTjp7rdAH3tPtWVkrFSWyDe3rw4zZpSHE2iqH8dDvTVuS1QYsJ6G3iqE8nQbg9FipofqTEjihP9ojvcXgKa9ASce5JNsRKHUSeYkAtDs561sZyf5uY626GcsvMYKGHjEjxCYJUYfrDTFz8v14dNAzVAiYQS7M32otTzKeXhB6ZNSRsErvMfrjgW6Rc7joCL1umHo8c3n3nqxLjZqxnzTgBAXnUNDY2g6LLdVRbj41hxTmvVkwV8MV5N1tvTAALAiagxDKu5bWsfTYFHbiiA7tLxqhsUvATorTzU7nrN1hjpQT3i",[ChainType.Runes]:"NY4PEzZ7Vfjp4L3K8LAKgrXaevRJNJDddHuZ2FcRv9FeWQcLP58p1JLoCk4zzVGBa19a7ozPRiC9xF5bvSWpLofsEEhZFaFY7NtsinQv7foN52JJpGqdxYws76BkTPCKScdfAahJfmx9dobR43MqQoegvmVx7D4yS9K8SLQLPdrehd3wAuqpK1ZfC8wAMXGixXZDkuKEQfQn2UBuMzzY8s3dcPeomgLq6aKRMzNn8FkxMqsuV8hTsot37rUMJLu3LAbMAvqinCBD2wLiZFvfY9qCUqwWzZK6AwF1qoScYvbhx2rZuiogfKapSKTqaA48KWCQrfgfSmzgsjahEWohvPVhZ1dP1CwBrCM25iPUFsWZ2KFrCGxU8NA3kT5F26QbrxUS2Ay8WNFpFTTkdM92RR6jpoZRkwwdLVXZpNVqcFdjnENj6XCqE6Gmbm7MkaaNwnPPqw2oqXg92THYshruGZUWMLm95ogrQE2vFhRGaPfNuQSLDF54A8pMsJjbysQYTHF1vUEs8uaGDBQUuKMsiy2g1cKLfQcUNyms2dEwta4pQm2s7M8jwQQ14YjcUQ2Es8AQihj7GRzwtC84eHQK3BqFSVCX8MpaqUL8DTbuBoj5TgQKqZtMWHEMuXdJNm46TooiQgdSB2svop2q1xGS8Q5xjLVf7dVtMy1x9AKs6ZRharW9THaZjkeCRsnhdWFvnLSor8zBkdr24v3aygf6X56kkXQznRGbBx36tmFNLV9c23zBw4hUHYGV7aAPY7xeN7DuwzgtR7UtsUQVdSVp1BymTgYhmRFV3MhWm1XG3XXoh79Tmi5ca8oChVZiMXe32auJSsJoFSmqnnTmh5xFgXPJFJ41iPtrj6UbQSQdTF6tzEY3b9DpCFBYfbHkTec7Zop3ETw1zRqnMxrAg2gsGdeFAS6Dqodi2XT8EonYw5Mft6DSZeXTAjNnwXuuEU98yRZXzG45vkdGRXg94mKhdEsmeRDB5GjYwf9yd3JujfJLNAyCzGcbjkFgYYpz4ZHpQDugGKBfZDTDP3cxjKL15SAVQx9rcL5vv8uv9wmxE5PQk321SNDKowJa4o1dxLfb7YWyqJjbKxUjt8WpHtMR9RsEMy5pphNPuZ9o6RqvGKoDdPTvG1pJxUB5qHAVdhVS63oyajwT2zmVLtXBk6eFrFvUziiYuX3sdondfaPcH2f4RgivRCSC78JLQz9NgTtLE9nssi5n4p2HDCTFBbfnuxHrNbXvR3",[ChainType.Nervos]:null,[ChainType.Handshake]:null,[ChainType.Monero]:null,[ChainType.Firo]:null},permitTriggerAddresses={[ChainType.Bitcoin]:"5ivrmzxYZZfH2wJRvogecZo1YYXm32CoKnSZdtwxbjNoogRakUFe56VrrcULZtCkvAzM2MNRMxPYSfZc2rB6tkLKLCirG14JPDMfqBoWMhyzzQLVsDukZupema1i8SvYUuoaiPL5rTyQmqgF3ftPbvM2dHY623B3KsKRTNDhkoMoRmKLzenNWqjXpkANpyc3TCkDuvBypXfbWVN55F2ZZUs8L3XkvaJKcb74GY7whJB8Zg31VgpmVW4uVEuqpcvPk5FYNiTdRakyYTUVFnAdCR6ZDjagBYMr3ks2uHMhQdjmoKmmwCocVm4SGZsA8rU8zj6zrEgpepLT5UPD9sZQWtvSi6C82fPEW9pvNXr4T3sFx2xNRv8meyNUhopUfiRzVoWfx6Q4ArqU3dnmRtN8pxkDfTZr7oGrzAFAb3DRhBUPhhfWY2USAw7LMqMAuW65pdUFcGnczQH3B6V4kALNaoGMD7ixKtkdMkrAPHkJmxKzeMEd6Y49PnHWxFkQbXwqGELjDppqmdbKceyrtjUp3JwcZ5qN7YcLg1yXhFUiWAHhnAwGkHsTHivXADhV81sDBVqM1GUB3piyt6gkJ5My3SaRRTsokrnJLoGL23GwjEfTzDsvXCoXww3MQcwUUCXehQConnMxYsK7HHGV4wf8kbctrFd2ekPkeHm5ksjagEVzKMraZJgrRSRWEHdYmUGkU6tLGZTUF4Xe4MkdzXC3sRtif4iUnZg6Tnt3DEx2i5fmPD4xasYkusc6thd77x5x7MZXMdkxuo9BWTG9iiYAaE4aLQ5yEbrYeVY85DCVFAKXTsiwUH1De3rDhRZfFfQRuDqiYomDFumxofAa9k89yLeCSRyQpAH55BXLqvppusJyDwYJKd5itao8z3Qi2Fsvt7oL77fDnbotPwp7EkFbQZdGi7aUU1SdyfhxNwx6dYcFe2zpj6Spj7zb98FR2HahXwXnqqZjuym7RjN55bqPt2FufJ7CwdgQmiBMid7E1sAVMxBZyAeNbhHEqRJCajpUyGXswJjQJ9S1u9c4rRHzdntMtr2RXDtdgrt6b69GpZgZNeAX3QG9W9kQK4SAHE2BULEmNSBZHHitrRYdx97AsDLFfLpzfsPa82ew9oBy3PacMAF2WP48yxQrAzSA2p5idB5QFbYoECBBLsCyApG37AMuPrr24JrWmZLqR5XEPYnKojYrMcciwkn3L6jRpC5c1D9KrsTGk5dGtqBji1FE9XAVxuVpdddJjBSjphPx2UWtvJnwcxB8CoRSsVDF8RoyPcVwMmSfL5arDGJxBUzVu",[ChainType.Cardano]:"5ivrmzxYZc1s5aYrsy9uMd3wphLaHx4Kqrw7wVDwQdtj967D3qYpAw15uAr1CK4RbXKFW7kersNNe9tXu22iut2zG7tCmAP9TzSNgHMSJFBzR9y7vmqpmTGyFmn6poS81E8MzwaJ2MxkULFoS2nj7CwVsCMGweg84sJShZkGm81jxw6N65GHddQ4sJsBJb6MYFcVXeLxrgnEMPd3eFH7XoVj5uM97P6rsUAztZmeaA9hdUkc9Bz497j5BKQaiXyrFj8ghEtL1cemwfnGrsybkuq132QT9qsW7dNaG95D5wSYNUoAP7mVcziPas1PvEa5xRgMKnvE4ByYPT6BfkAMijYfXSDLzi1EbksurZGfC6jX7jfSgwuugXMNbjrUwhzj6657H9MsytUxRW8kNUKN7mwUphQGFS3nWLG4hzyas5BF8MnK7usWD7MJko7FaUWwNPVrRdatwB5uu6rUrY8UeAW9DPQMrL6VZWMKMWFmoY722pVYHdMdCsehR3CnsRDGDpZtvdqJnGgn2czeZ4AfK8o6aykw3HMTvNP2e6pxNt6FYgr2WZhbXsmeqA6bG7t9JNCw6H7tA8KJPAN1X6CYeZMitX5RWCrMtrSy2NEDepNvMgH3n4GD3tvS5Rs94gFVWHfLu4JM5BaTwfRTcdfirnwPQhYhtH6SEc8b5SgGkraojn4JgkKGp2ftszDUNyaKrY8XJQusuMG64Aoe96wr2AaRKKtUhAKfk7kUXHtGoV3h4MhDy5Wnbgb6hXcmQoMQ8HnT7JMAFWUUeWyveNn3hdNucDf2WtmXBsRpwUidapBJPD9Xukw6uEsWdkzsCNcdhZM4EqnkadRKziCubVx52TYoxDYqupyLssPc6JdaLUWny1Nh2vsEdnuNYXj82iX7AeJRaHJeyn8wytA7G8NwQXp2THTniwF6hPCWTub5khfdJ2g4VDTv14GRL88NA6w49N5FaG2ZWxqgRKYxbEJqgBE91KWHoXfsB4qvo6cGfMwpeJU5g6FTiexmXZqrNpRwmnnx1NTGK4TdqnksfaXZPMfPBbdJnQu1vfGwLuMkP5f5EvyfQ4KzazA67AxoabFYkKJk4pvVkRqaWUps9b3nkZhErUMAgxYR4raNtKHSUT13c9RMaGQmtV8viR4b7Z2JoKjqiEP9xGVoZBANhDpJ3EpihvRmDuy7MAZfy1qEm59spvdgdPPEiffw8GBv9MyDfsAGNSzsMhiP1f8WKXduWy7AdEJZTrBJkLZFPTaRHHyU9XvbRyzrxhV87thVrfRhv88hN6Viw2CyRdMJUPmVt",[ChainType.Ergo]:"5ivrmzxYZTDDDoKD1urVYrXZG96ijTUYXQJzE6SCRJ2RR6Kj1UPWL1iN1xeHgYJEQjnQ7m3Ld9tBRRYqjzrAVAqHyGbZB3otUWZW4sUxN4E11fNUZEMQ3kVwnZxFmeSaxcXhQiTFH1cvBYWuFMRRFfaA2UMfpEgm2WoqeiJxPCojp9D7h6yMV4br5EtWTQJKRtcopBRoUgDg9mrKPAXGPZZKTZbYotgLKQ4nzD8QB5hjYJswhLmePaY3zK5eJq7NTcdoAgbNPK9nQ9UpBUgrc8RB76P8evPHMXg6HrVdQ2z3rkvYFVZqH9SmCkE8KGiLYGX7hwaXYGvPExdoVDp7qsSctsPjwgt9Vts2G76dzJzfBhEunJ33vdTEkEXX3wkjK4ZE8g5YKCwGpcED5PhtRQQtJZaZMYTZV3TpbPWy57U49cD3HVeUGR7efxUHZxYybWJ7q8i6NDm3PUwKFN63HmPYQn7TMYGkvSoizTuTAUJomiKgSnvoz2DSUzukRSRmUFA1cLqdR6s7FbeJfpbaKWX4kUGM2Xh38FdqNE94SjkQMY9bv3H5N8MgwGL2La12e1GXAdMCKJCWKRe27vjdaHJWmsKrBLuXQegGN8BaqNuvJbhrmreHAjR9tVwVkxcTUsr8u8TGUzkzN7coV8HiQV9KBMVgQ24NXPYyoCuedwfCiNwYX7PSSbvve7Dgyy5e1S6qbVpEpVtjy9NzWfRaqr5CyGDqhkfjizNG71NZu543vkacjXrrfPWqtNoXMtTRyM1pzwW9ze9aoRX6e92mVaCUB8hTnfH3Q8EstRLDJygLmp63y45tKwBVBDjog7Z6pWhTfBapMBz8Q28pMfPAR8ywfz8qvtkyQcv9SuEZWfvpZREaS5PGhBuqU79eR9bwNwS6TLu9BZV5Y1ahVFA1fMUxhXTvX69hKnNHFgZ35fZdrVrSeU4U5yGvYX7ViTqL2oFk16HLoTXgNs6KQz7PPZr373gDeRh7PfXpX5jWyxw6SRreE3jB5SUiQnZxmAbpJNVkPzFbZXcrsrS3JHSfiVeqp1tk5uNaZcX39tQTXtu4bGrpv6EiMvYPkiDhCiKd5oAVeZ8VxEGN7SP94vF9WhS2oWUMCVLU1XW2DDHejZ36Zo1Ho8fHbUEaKNbRBozY3HYnkYyJuF4wer8xJ6q4KcPppDrS5jqfAaZF6YWsdtqgse7qMeWVUPj23Vr5XG2S9sYmWA7femKuZki71S6BqZGNfit7F4vrzqNZd1L5oyLSVCtuiv3DybRnu2YEaUtrmCphsmrpAFSEwJWtFKqcC",[ChainType.Ethereum]:"5ivrmzxYZsMEcMTZnZnsQm6jutdmSRzVW7WZoqN2c82khPoBUwF6GRVZdd6XhnNf9gbi3fsoZRM3cHmvz3sgJEJmy61cRxTKrM4q9ZfxYKBtyfNXLwD4CCeMedd6pxYDbgT6h3W5Qce2DZX51sw7aP6hu73HxJvcAirXLCYdZxi1nnGUbZYd8WNkU9zZ5ZGLVasrL49hVLNoJsP3ZYLpqzXchCL8RKv42qnLJ2kHc9BZJyv3QAYqMZTZSHQyRnYj4GAbdB3aYP71ge2HXCb6Arc6upjU4cWJPrPY4f8QcMdhXTrUtWp9u443Ekqdd3S2y2jfWLjDLsd7S9y7ASHPqx3GnCcPK4i9YnCQhdM8i5f59nA5ENgo24BTJvyQiRssDrCPpHxeTUp5ae2E5D4vyAnFfWCFfD6f5Z6DEDQvFnu1JLjjLcunp3rehGTSNgjyNNzGkjf6GF2y6enPuNcfpyNWsY2QJot4r1yZWqzeHvMgjbhnjpcManj1ikT1FFeg1oKZCCNBUbed4jYnmM1qFFmTYaovRUuEFXKFU2fhpz3EfEB79PUd5g5YMu1MTkKdUzLrEnoTxz9GKNpXCsoFvwC82hEuwXPcPFuMHdBFa4jtqSueVFgCPHHiXMz2koe6FGmCzY67q8215taocoiEC8NjGNTJ6Bzz3apbT5JP2hLVi6z11kNDQgtTA4gNRoftjZBBNVaFFj1DwURqEBzdawony7FvSpQYzgFEz5PKN7rAAr8Dsd4phbesmeASSph4aQLzB7iuibFSZXxyBm1w8GUEodaWEhh2UeTCJx2XtocU9aLYrUSgA6PgBF5NWzWwXDihESwyboSKnDb2mfHeGyjkjKSfQP2oP8Las1CeMXPdnwXUggckB44f82qjE5ENnqYhah4s5WkgPzzSvx42uhxc8VTbySPgiDefVGuFCEATX6fgAs5ikKh38TYWzLbUi9qM5Ncz9G7Z7Mc8RTdKtRLSxLUoPpiabXtyfdBkNr5PYhznMd3TPy9EHKinSzPV3GiJHGEkfYAbGmf2imbG2LrGtCEnyft3vBXYVocEnAXZsVKSRMPvkWsA7J2LRuQHrZCbVwY4LBDpfrHriEGUnAd168HB7DKPqRtCsVLgd2h6JgSHS4xXvfSwhG371VfTxJgAAtHUgKttcZfpZGXffLCwP7zmQGNVz6FJLsTEN3VXaQMQ7ooCeGHFdL7nbB7ejitfnWzWqgwqi5kv3nZEcmx4YfcnyvAjBosChtBMNfkMSVqa42Mx1xat4eJvHD5Jm1AwYijVqQjcXYh1ZzHqD",[ChainType.Binance]:"5ivrmzxYZw1LAT2rQQY7Gkiuo36J5uzCTyMRoqee9QDzT4Wa1NnZaQ6zVLw3yw4ksfRCdfKiCYfjyiaJuAvdwi8WfVd2VJZo5VfoX7qNEELk34ZdvjCGsSdA3AWVfqSPy8NxPqm41xeccezcgRCVmyTHJa4pu38vtBvTZsnV4jzGTZsSstTQPGZMUUTys6VSBRUGqQjFpjVty3jTFudfJ4rRgyuGhyA1A3jgzY6wPSBXHniAi3c9rQLVEGNzpuyjXD1bFVemGdEmZp5tYLKb5BMsasJr6fa3P4xdyWryg6uUrxGiPZCRT4Z9DMmSyJdfVBFtnLaL7abqN3evRuHrGMn3KVVSFocUM9dLGZpU3XzzvWkgjwxB99FVJ4TzCSKphSgh3gPuCnwQWFhpuRuJJzV8je2jtYguEMNzcygK8WkvkuTsniW3zqJdGpHEqSKcQwnR7a5nP8yVyRRi26aYrNDjuJ2XoqnpLSSNAPmFZNApWcXGRqsqdaJBLsKPkkFXNYfcpwPNcpuExuFaeLhUaCbxdjWKBWMHPxqEhvK2dcs6uXhPjp4QX9XoMSiRqBGC7YAxhZkChKaxmBM3y2sTsyfW69LFM2VKs84FF7tXCGKPomVABQCgVbt5p9BKyPcL8ERa2LJrzfKJwfoXSAPrrK2QEd5zaDi7g6tSVy5QBFzrYARnncF2ZCuGR9Nmh6VAWumXpHfVq83iVVBWHKjSvKJuBEFUzg3G1dWmtwxqRZYFgdgd5FAZp5M6Nj6x4VMi4qcJe9S1exhMHKTDmKnmsJ7AX4YA4MdRGYXGJHRSUb842gqEYbqjjTSu8xRghbuxg9ghnr8NVx4uxwE56zJUMzhP4bVftTH6XhS1MDoRUPi451LcAbRr7QLR7gq8FS4H73FtJN4cni5mURRpNAnzEYFWcjmqaUuC9VSfkuD3Aqk7vSKpbJoSkcaZMXdqb9G4x6SGxjphx8kvxQDTJkmjkxNB5bADpRA7rfkSjRX9zekM8rb7NKu5doxYovb1qPgDuPPbD2eA279btntL8xzqTW2JWQdTPqdHG1ezxBsSWqWdFzzJYFh2VWuYB59A38EB9Mcihj995Y1DGfLt9vHMaw92ERCeqtk4MqX6WSBYc9QzTEA7wUtdYGXLydyRRxbLpYTfTX4sUvhCvg2YGix1L1G4nFaNRq28jiZjfKTCLr2TWDzFvX4jVWhFjFsBVRSCQhiKfDRpsUXm9CYXuk9tvnoVj2NN3e3SLyiWjCEUap84EhdyZn1zHHQSXnsSoSynR1kiWSDCuJCBcyM2MQ8wR",[ChainType.Doge]:"5ivrmzxYa3qBuYZ3teFTEJP1ziojbVZAYdZF528CNfT5tiycZoiqXfZEqgud81sBrXGyGoanY95RS1xwRSzc4nSGhvhg9Awr23q8vde4k7PWrErq42DeCwborsxAwKm1YrWJEwD8KZiKmSMR9jCD3pTxfsvoq4yMJeh4bscJKRj9iuy79tzWT3NU4L1vrVNjQd9ksz8V2mUeU7EXouDTHxAM5Vci3HgeC2CBqY23J3mpXryfb3UPha7a4zf2eF7Tv5viA7ayrGgu582W2ZttnLFHQTRn3gnTU715qzjk7NMer98y528FxXNZsjSFs72tZm4kL6zMthigXX1yNBtr5vXmYKcHUyAeRWuX2CK8jAFWYF4cJeceCN5E2KjoTK47Ge7q8B9MNZBVU83HPGzjVkqjvFDQsDZyt7hyCRhguwKibwyw1Y76ceNXrhzwPgukP6PsCWyipqSMVTAxB3QNR46mGi1v2S3MNKR9bThJU98yQntABweyLuqHVmALaU5s971p9SPi25gVnLsFD2FQnczLpHR2g8iJ2PcUZageyVyCxKbX3EvUoyQTymeaQuSwNgySKAs67YgUPFGcmXD33Fbs7vQvkrDbqUVprE2igGNZvCmStypiqZA6ijDzbaTX1XwFAehFT39WyGQ9NXzCtYn35fj95NLkDWugvEmqL5to8JFbCcHbV13WCJaVgvcerLKU922nuM54QXYNoSQHYdCypp3PXwaWBbsemt1cbH9mGM5JnYuhAm2gKctu7rUwCQ9P6qx7k4nC6ycUWLPsYeaYt23RXxF9cx31A9nUqSW4n4j46j3fVTkBX47C7X2TFF2VgHFJky4d3etKp5EQodYs2caNLgmmACErMCtJ1GuamHCfSEg3iLyLaPAmtRM9HFUVCsMEL3GwLzqEasH3fy9dpUrAh8FqAHPT16gAx7ePEPU8k9obwUyYqkxMBuyaMonoy37GejLXzpzM9DTacEuNCBKw9hVHnDCB5Zxkhuj5kkaH3794qur5GCF3XKFnWNuKf35DBwVeEq3SMMsWmcBB6ZqfJJxa4vCLS6aEhtDxnSxw1TS8T9bvu91dXLH6HoAfK5vnoGHKP387yTuJmcbacFtvBoT6EWDS6DvXQx9FptRgojeF9T1ZjCChE6igPL9WhWPvvCEm6BMR2Jtsxw16JJzqMW33W5CBJstoi8oSKE2yrw7i2hxsyY6UPDWZUe4Cex2tSfWSzSS3tXo5ahVMfoVHxUmmKJoE6St16U58ETVipwqU6WLJT6BGYboueetYfbzL37FPgQEruWWNT",[ChainType.Runes]:"5ivrmzxYZwTAiTX9sPndhvFogPtijgcySCRKTQBJwcgHkKVsM9Chqog7YhdVDbf7AH9Z2PgYmjMrWbPgDDCHLDANY9RyY22DvgyS3P4XmuD1YptEBLveRbcQGJjeLmxF5HzmQePE9MtFC2foD2e7gWBqqSuhcSQMWtWZXrsWzEgbtvvQP1UYsW3DHaXa89oQzxiLq7bGPrVqvxEK3fHS7onA6MZo7bf2UxJE7zqnbvq91CLZCAcp33VM48vTmwq5X27URUV81iJdpqES3JSVdAdDqrMXGiqCh8rB8mJsVqfmUy66nYmK5QVSu11N23pELKWotBnoN5WxZuHugeytjkFRtFMpwuowE2tmrkJ6NXF4BBe3hAh162o6b4zVUpbkhsjg59HkaSeFAhQScYYQdcJf6uZoA8cF7JHya1QEuVzeG5esubZjDx7MSPrEL42Gehvbt6QZ6R1QYK6gZSFB7twXHWWgcX2VzjofWtbAJkN69JbaWh2W54PQ4x8JZdUTWQcUQUTbPd6T8Wj8xuuXWfGLsadY8CJ9y1Nojctupz9MxzkZZQZnqtuwnNU6w15CP5MGskSbpF4U6Ha6mSnjQzWRGTjZTS73nof3Rr3QcJzpMbT18GQCoZnkUXJ19ch5Ub62pBhSc7gUaed1vxMfyfHBpnviCMwyTA91MWCjajbMzZyEzbrGz47xFW3VuPkTqtyNTFbue8pgouvoDC7vu7haTQWyjQXQ4UmVN6cWNzxKW81JhUSUWPXy9spJcH1ESXwtgJPGPfGwdmCPkJogdrZvPZcrPpDEE3U2UWVKHwHPVgGj1iDdXDxCaht4AdHus2sJhtC2P3N4gsP2RFbkecSMZii6ZB5R3n58qzq3xnCeHbvCu22Xdkao7jFPkEjDqdsbLVkwK85dTVHcybB1xV2Cgvv4YDjaHemfAwUrWEfELi2MgJeRxrA3bPPT8PsAh1uSMMEL598EijK2Psn8YwmwZFTMoigWEAfr1PzvisDZjYAH6ofrt95jFHuT1XKFy3wT5uhveGWjqFjhJpV4XvvRf9qLBiv6XRTqimK3AQUR1URog9fkfVd6u9spDUTkX1tWMTXRTPnrCPkWmkjY9K8PdSsY9YsbTv6YQ8HzeeiHTa18uPhy99bd4k3bubL1zuAmPMoNDUKm2m9d3xmMB6soNS849xt1LS7EeXRzvkqEY2kU75QSDSrqhaMPr4iGYkd2JBjyQohbCMsWNdsjWqxQjgCc7cyTWQngrtLaFRXdLbVNKCzHvTzCnWqpa8xNZB9ecsrcbno13jrAKzHhx",[ChainType.Nervos]:null,[ChainType.Handshake]:null,[ChainType.Monero]:null,[ChainType.Firo]:null},permitBulkAddresses={[ChainType.Bitcoin]:"ZsPNMsGz8D8y11MAneZTVjJndCjgTUrBWezH77jKWr2KXMVRgs4gRkDdTLoUQq8xqtGoESTa7r3zr5E3SxQkE5CM2PaPDSHb5bQWeRtaL9eikJWw95bx4DSjCDcsECpjLxbEfahCHy2sDuXQg6potLhwVVADP5TNUxEDgWPR27x658qcHA54TPRhybb6z67cdmkPrQNXwumoGvoPNnqVcXsdXS71KpQViuk4wXBT156Nd7Tt9b3Dvx827QiLbjJXuajydCDFC6yp2sj5dk7uA5ArNfViybrVQaf71GNGwyh6USgVKBpTurrRBtxeGWNzXi4krd7XbseaU5Crnauk9fj5jEbVH88sPzuD6o4XReNW3odcKDkvqgUh9Vu6b2uGLJsV5wY44Kk3bf8PJmkTc6vQE7Mprkdi2jBfZrzffqoKC6hWLfSZNcUWFV821L43VkJbsaYLukMq1SBJ7y7rsnWcct1U8owQbDpboysHrxfeE84JMTterx8E8sxJqwQRRTxT7M",[ChainType.Cardano]:"ZsPNMsGz8D8y11MAneZTVjJndCjgTUnjAi7MBVhohaELkSWjyWJLdqw9DFRK5XJ5mS3TnP1cxLsjn38fsQ1FKDfXpczKLF38JVqUcTgTz4vWuQ3moQtya1Yb85tJXVnq2NgvDcuWJsRXQWyqBABL93WEFwT6TWiZeXVAQ7x3EhJGmFvUkbZqbtkHvbYACQ7PZVwVNXn44saome9v7QrCMqvxHHrdqaSc13dHXx2MGVut22sVvMsNXT5ody7hoAqmhfioxM6Yw238jUyturCgtbWdVr42Qv5t2aZ8YCdz6ifvqSbKmnNUBSiccfxr2G9Y4eceJ5jv7iJEaf3RAoYH9vTP1yiacpmFZLjtT38FUz5n95ubWfNg5kZAiefzyaFRpV8sRH147FoaQKFRUQRACivsVvXRBhZWYeA57VZ65E7E6d5RU4JJewNiQ5de5daAQXnC9aV2diVXw9obFC2aBYqHz3U14gHss9xvcVPuqFsJdQRLsejtnYxuoZcJF18vohmNKb",[ChainType.Ergo]:"ZsPNMsGz8D8y11MAneZTVjJndCjgTUjPFBh5wF6ZNmMySHVDcBmMx2VxGFNCcMxCKDPkdPEzZp4bt5pgwrpZyKV6nmzCAh6SaX5ZnN2fL2X2UTuLvmuk6t8BqrxoiKHmqASttYk6xJPNabuF9ZNMYQBikFWDmq2jrxZS1MG6gQQ2Mx1MgXVvPs9ZkDTe8TykK4MuvQwtjaatjugK3FC5gsB4e4KiTcMPzreUkHvC8mZQGTtGkmHSbq8hkUDfa8MUMAka4oV3unyhgvx9MHjSDNaKWtqrWJpHCsQqPxvzPKohoYSNQt6H3V6ddw1dzGbBz8eKSbno5tEaLSryLDeMAbXhivALPZ3uCyWvx9BKFxSpuqCuQs9aXH7zKedvxzE6XRrrC2TZcWn5UinvbMNu3S4i5oTK2Y8WeVfoy5XHRbK7AL9w9pimJBp5Dx2UnhhHrWbeg9XyVZP7uCEqcUK3iVFmdG2euUa84Jbr7XVaE8v3sBa8LvYdxc6wAVfgPNNbQNxK7Y",[ChainType.Ethereum]:"ZsPNMsGz8D8y11MAneZTVjJndCjgTUoSPbApCbagsfJ9WvbzbsgAbzHGNF5aNaoR2AyxnrCBH68d5TDEc8aBhVRBT4Q5UC5tdqi9JpMqC8CYFja9PYqMj7KZDjPyMHPxbqUSrq8pGVwe7f8dCV5brNYBCrNqcrC5TmYvp2HpoEUXVb7JsxCuPWQFJgXqYhzEbySQyZQGCdVX6XtjU7aQZK5bzijsXDJhuntTM7ntmdSBJjEhtkMrvrBH8RtTW2JHZw5ZW5QamM3MJbfYDExepJQeJtACiz5n36piDgebfWgjAgibjz6oXsky3mJk2rAETx25AMQSAkHz3cYnH5Gs6BorBka9qXK3U47Dk4tobZGbEZqVeFvuaoRb7VcGUvX8L4rQf72gXzVVCVvY9YEzVoFEfFGe392S5e7X6QpdBuap8maYY4RygToFx6fLeUggDP1gEQ2ptDXZoCcthQPR6ey1GtEju8jqujt2VvJ6A8VjCbU3JYvozB6kqGxLCLKHaN1zm1",[ChainType.Binance]:"ZsPNMsGz8D8y11MAneZTVjJndCjgTUmenzfjjRBRRAo2DZVkwmBZxuHGoNTFLLrmFhsvuagJbFxBVLFW2nnoSuDHhNckxkJhBKNVhfPghWoKTuCHsEdJcJ1RD6XTT2aWbGPwHkja29mj2RibYNyCqjkPWEmbRJhVvfN2DUZ9pExxBPTmghNa6tFQyLkkfHdmuXEXLdpmWndfdknawDuojQPGjx3p42ewB4eeV8Zs7dDCDLdUUghTcczqJAadPMroUpmifMTw1FrpU3jC3kMaSzYpcpPu4e44xEni3E9hrenfQePbFVe9Jq9bVyjsQBF8vC8UxqefzEFmMoHT9xkdRNsFmfLMAximM3nyNhTMgLimWvLcNddW11jK1FFPumgKRUUeRivjtnXiRsNedXpmHKhvSVvpS8wAJbuySw3bHqkrpgQHqAr6vUiXj5McjsYzVh7PZxrUgEGNe8uLk4UpxJGhW3TVLNcPHdEbq2AoyabVkK2ChbE9KZ2JJBdHah93VgZSVG",[ChainType.Doge]:"ZsPNMsGz8D8y11MAneZTVjJndCjgTUn38JxZpW4EiZgEoHt1Juw2od5nVwwx23kjav2ZzWjZAYrjAQnGwskZjCxmVagr3o3d8AfdQZySQigfqzTFjekNSHeQBuQPQ1y3ry6fN4w5ECxn9jrmho9pZFkBddZ2QLbAhvZVt8WrpduXniFkG27KsYo6ikCtgRsJyvzjE7kubBpsYfRf7tV8ZT2RyZaSGJp8Lo6SbrAMdDA1mke93sDDkP6B1cXi1UdSSg8nAi68b2HLJEdnw52KES4Xnh3Dg3s3n9Ur1mGf6WJ44oVVxwsBHoXWLhoAXJ6v6XSnX1rxBcqT344WHLrezqdGwzYAbKYqGtUiEZq6fcHVhL3Wu3pxkv2WbupVFpVAeFPxYzcwwf7vtibL7KG5RDuZ3rziqCgLC5jL9ckTS4KkZXH6YEJktNnUmULpcBdpGUHWzeea2SLMeiNYw1aoZ1k9QfmVK7TjxKJ5g8gSrSTwmfZHMPD5v6EBYyu4gBe31WXWVz",[ChainType.Runes]:"ZsPNMsGz8D8y11MAneZTVjJndCjgTUm8aRdfPdTL96n8TUczBDtarP8o5pFfx1VTt8SLmb8khLsa8Jg34fMWSUnTroano5tp9vHvj3M1sPbbr3gw3jZGae5LUk1gAj1G7ytudoGXtvoDjNtrpfhwQBVat6xHLuyE8vHQ7CaaToTn5MTFdeYg5u8P5XSMHtb37j4ZjfVu7H5SrMDMaGkNUqRiwvU4ABYUQEc6qNqE3XqhVY32EerjQwB4vGQwPyy71CerANA8TVcj2sqERsXdVwvR2zdWoL9cv3vc1MwVnMMpeAw6Tuh9NcwmYHPcgrxPvZGwn7Xcd8BMFfSDwDGxKjEctFfH816Ba5sZKV32wwLHbACLniA5MhojHNzjAWuPjHCGeR3VF4iqW54kDwuk3vqbHqM28j9JeSwGjYaYYz87tnfhFchAAgYqmoCFZQvAUJo8SZThNTmTrDZvWeS5BPSYNQiLTMgqAnFpVmsMN8EqEnQ1ggHdLqWQT8bmMWd3UTTwqs",[ChainType.Nervos]:null,[ChainType.Handshake]:null,[ChainType.Monero]:null,[ChainType.Firo]:null},rewardAddresses={[ChainType.Bitcoin]:"2Eit2LFRqu2Mo33z3pYTJRHNCPYS33MrU9QgeNcRsF9359pYMahqnLvKsHwwH72C6WDSZRj7G7WC5heVyUEawcSLSx821iJXT4xWf2F5fjVWDUpyGNdkxhFwQMhPKpx85Uu16put68V837wxDx19LRJ5uqi7xBa7EDFRU79Grzk8HDrfpUF3qct4xrQUvDofDroRQTuKueAbwybAfGDhNqG3jzKQchgjedBkbPAuDuNunehW4ZXUBLRSfqy3xofV76bxT5zpZjZcKud4XaRQvXUAVGunJzAs7RNZD5WZxenhmKzhiyuzWiq5QkWqxFw2h9vQ6Dd5PdYsWP3dPtaDC8WUjGz8tQ1tU9LuhqZ8QThQA5zBfoPFrk2iJ1repUuwZPjWnDRHLfWppqDQJGm2GEWHmYTQAfCJQFChUtSNstSATxw37xXjziKkPQRRVPr3VPapbHtGSoQyygzTHgcjxv3HSzwXkD7DScyA2iGDsd4B4WeXo4a6nM4CYpxa9f9FvabbNByhKsgq3ZoCsbUVXN99Pet93MFdxVmBBEsGYEYvtmMEDZEGb5z3JZDtVSdudFcm3bij82bdFzKSmmxxWZhscmLYpGGq1J5geqTiyTCgsmksAHumPFBmLkz8v843Jc3z5b6dwFgyXuBmQPTq6Nf8t95y1UYe8UYx3qNVfrHSGbToSgvCQyLKVv5ns8T2SZRWWr",[ChainType.Cardano]:"2Eit2LFRqu2Mo33z3pYTJRHNCPYS33MrU9QgeNcRsF9359pYMahqnLvKsHwwH72C6WDSZRj7G7WC5heVyUEawcSLSx821iJXT4xWf2F5fjVWDUskGdVdyYY5RBJnp3dfYC7iPoRNeopAFQWFwEbTieow347UhRyqvo2LntFpXzomvGwVTfq9YXS8Z1GGW5mUEioD5xC17Sz72NLbQrskSx7QZAxQTbMGh6vwM9J4q7NzRmQeHmWaHLpUHMU4Jdd5ccKumMvAY8d5C8RxB4iATySLY2N1wY84qNsWNaqkNofbUebf6LgmU9HTKAmU3nDoBfX7mhCjH8kXDhZeYdRsuLVFEYu83TkpwgHAYGmUoemxWAeA2BKMx8CBAy9jxbCyUjdnk9i7sLxuejrwLLh8W4tP81YkESjZ8BV65BhzPdvCaiX8vBSorgFfnvGKVzwfhhsSDwLY1GUwLTMLwTUTjSzEjsMX9hzsEEEmhxLsekabLmK3HZ1jssLrFryNuE59uS51hazJsi3gsT8SBk1J9YV6Dq6xto28nLqrMqK6raqLcAm2iU8hBtqdoSXqWzsrZHpqc2uLGhY52ee4k9TpFBvN1RovYUtY6KS4FncT4UgnbEFkzsnWYKX3CDn16tJs5CyZ97gKcvUonZ5EqTwabzni14CcQsTtKtEAqj1odvSyfJ94NnEjuiVPC3VmZbQvveN3bQ",[ChainType.Ergo]:"2Eit2LFRqu2Mo33z3pYTJRHNCPYS33MrU9QgeNcRsF9359pYMahqnLvKsHwwH72C6WDSZRj7G7WC5heVyUEawcSLSx821iJXT4xWf2F5fjVWDUmvtxr3QSv1aLwThLXxeqYCCc34xjxZDPqPyNGYvWLNeBZxATvBeDuQ6pSiiRFknqmvYVsm9eH4Et3eRHCyxDJEoqZsAahwfVSya34dZNHmjaPQkwWo3Coc17pxiEnWuWmG38wSJz1awE6cymzhojnjxDTbbXgjR1yfYU3AU2v9zttnT8Gz3gUzZNSwjiXSPu3G9zkDaFZVKqb5QwTWY3Pp6SFJgBQfx3C3sp4a9d3n9c98pfWFWAGQN5EfkoHosF8BQTDuzXG3NU8gVCNeNPXYA8iWCbvY3XpxQMvQUxqkjDv9VQfUNvAKVHLW43chi2rdBrQ7Teu6NnesLRWUKXpzSxpByWftkCCdBppjZtYmhhCHqpQGkQyTcMRoP2krFKe7xKbfnFkdkhaYH9TTdKuTuKtGb265RXxiqrc34KvkZpaBBQB5UvoCU4iLSDngNTjqkNPnWekDahzNHLd6CtcdC1B19jdGEXWeNADemDtdK4zrMNg7U8iVpyGYhLDnkeLVrcbhoxkHxrFwfrN19XvitDosQqmt9dseR6SWHBCDZJdmJecCiEwd2wBiwN5N5umEy3Dd4Hznv7kDr6eX7KtYxp",[ChainType.Ethereum]:"2Eit2LFRqu2Mo33z3pYTJRHNCPYS33MrU9QgeNcRsF9359pYMahqnLvKsHwwH72C6WDSZRj7G7WC5heVyUEawcSLSx821iJXT4xWf2F5fjVWDUpPyXf9D8PFkALkfhCu47xSApej3a8VHFCfLuQoMFV2LgTs6hEqRf2XQkDHzn3KYbGJ9b6gs2XcYf3ZQA2gJaWJXFErT11uifohMFFRJV7cb1eECubCbHCib3A434SJVrZee18QTRECrDirtC2GdZK6fiKGbGcKFTZWK4f3ChgnuZFCjRoCX2UquL25b2zkev34shFCspbYwYcyKmc5xxrvssUHgQmUZy7yu3RKJPXYuwH7SiittGsJ946spWJEp3cuBiMcpRvwbiCyrQqM1FtK3wZJKqy95bVDfj9zXwFfR1rE9wZADPs6xcJxi9P1z2iBXqPXGQHnKVaHJWEwNZfP2KAZeUi8etKnYSib68e5cuif3YNRVFdNtKAT2SJEsJCDmnUecmdCwvzMeH2EtNYsRBWVeTV4RBypRPi243qkFrct41bz6WZ8FhLFXU1tnExucXvQ48ZoQ4RQpNorEcGNDY8MC52yhkofS5b9wy6AYYjpQyTMmhD1QZF3VcQgPNT6x4yxPXYsjohYZh96h6M8T7m9gfVV3w8xowtVQVAB1kvJHMuZXxBkBNLwFbhxKuMwC2Dje3LZmuH9mhg94f7Uoe",[ChainType.Binance]:"2Eit2LFRqu2Mo33z3pYTJRHNCPYS33MrU9QgeNcRsF9359pYMahqnLvKsHwwH72C6WDSZRj7G7WC5heVyUEawcSLSx821iJXT4xWf2F5fjVWDUmAMWiE8WncsqsSRhckGHa5xwdGj7fCkypvX2Q9ypun1tUfQ8YwoXYgYCSF1M2t7WaUb2ZZzY9yETrdm8ywS3VzDFpirFEiLLgjE5vhsLkcW2PtiChF5npL3SFsxnSY92ZMmSw2U9GzhwDwTKXpPUD17dydf4CTbLATnCdiTkEYxCzVqh3XnBebDhEFSHWhCWVtqRniJJRqpRaAsv64qtBPabPG8HNRHT9TXFR4a58wH8VqdNuUSKHx1NQahaXTPYHfQX7H4mAzYU6fbH5uryhxqSh5HTBmCB8XrJcXCR41FeqjwrkwTiEHJkkyHVTeLdpyaUcHJ9M9nEsTbGbxMBLEc6CLtzRA5bDwFAKXN3i2mo86wUghaPMd72nd3pLDbhGYRntgYMrVWuVDzMhdJamVvFPbiEWiCs1BJ9NgJzasvJpJQxm1uBYskrWnULHQaJf8Kfoixaqcz6mcp2aAEAkoAmd3CcAddM4X1vCuapWeyaxLD7kXrHaafMsatugqJP4JQGFKEkXXBhthKScGLq5wcbYb2cVv6HuzyxyMg92UiLzTyFDB8QG2NwKgTfLGJ5iLDzzsFkPGtkxECDMVmiw21E",[ChainType.Doge]:"2Eit2LFRqu2Mo33z3pYTJRHNCPYS33MrU9QgeNcRsF9359pYMahqnLvKsHwwH72C6WDSZRj7G7WC5heVyUEawcSLSx821iJXT4xWf2F5fjVWDUkje1kCt7DSEufp9kN95BRzhkMTmgY2jmZ3gPH7hjfNkbPBkjLNifx5iH8wZ1EmiMFiWKozc1ZeT3QdnRhCtLZwHo5sBTek83753eK8YZNVgtykvcdLDbsgGyfCXZtJ2zxbNK7522JRormkeNkhLFBxC9u2tQ11EHyvcg8qHUhPA1GCXALUdtB1FkV2chfgewbDmtrpn7tqC7o3eaxQs3Ted3mo3TKmckYVWca7TqHnBCYGE1GRH2X3ZuWuSJXyi1AxKCyRi9JucVAGwpBhQPNR4viEZe5fo6kBiChWriCKmr7pti8685xoAz1ycFnLPKhbgdkwXmZtoLbYYrirEifkMJ1QXtaJStb86NQLQU2ThhqTzEkP22D8sRZ3Ud2b83KcxVvzzCvGeDRK7SkfjbmfhTCazJwwXiFTHBgT2tzfJvQTazwP6czcVC4taS55Ts2uKB4Z9Eu5MeWEvbBLBis8KxnkZkdMecxcBjRdAojCwyMBJUz8EPYo6x659TzbSJhjJiFaQ9f4kanVBV7nC9gK1rq5oY7bFH9MUcwGeu38HQk62kUbv7Q2dYx56CBVw6cHzdRJu6AXHY8dAy3BLqvHCV",[ChainType.Runes]:"2Eit2LFRqu2Mo33z3pYTJRHNCPYS33MrU9QgeNcRsF9359pYMahqnLvKsHwwH72C6WDSZRj7G7WC5heVyUEawcSLSx821iJXT4xWf2F5fjVWDUkvTLn8ZxbjUxBUfbKqvX55KDzYAKYt3ZKbqRCPuqoyroFuZ7Trm66GMmStkANyvdxLpKBNo93c6zjtuWAiV6NDw5hxCj1DJE8trc6nfcnKoeF3jvMyn8RxWxFiRKtShRsRZ84y5FKRgAwhwDWqw57qsNQ3WfPFwnP3F8XWa2sUYGb1ECxMTtyLNP1Tijz9L1rZYgVGrRKtdWEwkoH5GiA7xYntzevHu6ttL8dxqNzn8eHE29x1dJ32prcgGRXYG4nhD5v9RV3UskZUR5EPVQLZWF623vKTU97o46qjAvv5qjDuWXnWSwv8UfeZXNhsq6GNUs4NExpR192TwNvQqGZVgwh8NTg2tj6k78qyLD3MVFn5CuLBqa8QLnS2NoYsbddgCAsFwPW4uj8sUR1hAzT3epqFssH4B4fdwwUDRqGVZfmjAuTr2uHdMThhq652v52esKvaSC43khGAW8ixmo3xkUTdqUtN9X4TRiQkw8PxuwVUxHB9Ux2JugkMKhQK1rzyUTCN9JAfU4S4hdKGKRBF3papEAuE8s76dvboioa5VANbY8JZAMpgdnECCxxtXqcRDkwvVoX9Pn1JLjtizPq4Uf",[ChainType.Nervos]:null,[ChainType.Handshake]:null,[ChainType.Monero]:null,[ChainType.Firo]:null},hotWalletAddress="nB3L2PD3J4rMmyGk7nnNdESpPXxhPRQ4t1chF8LTXtceMQjKCEgL2pFjPY6cehGjyEFZyHEomBTFXZyqfonvxDozrTtK5JzatD8SdmcPeJNWPvdRb5UxEMXE4WQtpAFzt2veT8Z6bmoWN";function getChainType(d){if(d){for(const[e,a]of Object.entries(rewardAddresses))if(a===d)return e;return null}}function getChainTypeForPermitAddress(d){if(d){for(const[e,a]of Object.entries(permitAddresses))if(a===d)return e;return null}}typeof window<"u"&&(globalThis.ChainType=ChainType,globalThis.getChainType=getChainType,globalThis.getChainTypeForPermitAddress=getChainTypeForPermitAddress,globalThis.permitAddresses=permitAddresses,globalThis.rewardAddresses=rewardAddresses,globalThis.permitTriggerAddresses=permitTriggerAddresses,globalThis.permitBulkAddresses=permitBulkAddresses,globalThis.hotWalletAddress=hotWalletAddress,globalThis.rwtTokenIds=rwtTokenIds,globalThis.getActiveChainTypes=getActiveChainTypes,globalThis.chainTypeWatcherIdentifier=chainTypeWatcherIdentifier,globalThis.chainTypeTokens=chainTypeTokens,globalThis.getChainTypes=getChainTypes);const rs_DbName="rosenDatabase_1.1.5",rs_DbVersion=38,rs_InputsStoreName="inputBoxes",rs_PerfTxStoreName="perfTxs",rs_PermitTxStoreName="permitTxs",rs_ActivePermitTxStoreName="activePermitTxs",rs_DownloadStatusStoreName="downloadStatusStore",rs_OpenBoxesStoreName="openBoxesStore",rs_AddressDataStoreName="addressData",rs_InitialNDownloads=30,rs_FullDownloadsBatchSize=400,rs_PerfInitialNDownloads=10,rs_PerfFullDownloadsBatchSize=40,rs_StartFrom=new Date("2024-01-01"),rs_Input_Key=["boxId","outputAddress"],rs_Permit_Key="id",rs_ActivePermit_Key="id",rs_PerfTx_Key="id",rs_Address_Key="address",rs_PermitCost=3e3,rs_WatcherCollateralRSN=d=>d===ChainType.Runes?5e4:3e4,rs_WatcherCollateralERG=d=>d===ChainType.Runes?10:800,rs_ErgoExplorerHost="api.ergoplatform.com",rs_ErgoNodeHost="node-p2p.ergoplatform.com",rs_RSNTokenId="8b08cdd5449a9592a9e79711d7d79249d7a03c535d17efaee83e216e80a44c4b",rs_eRSNTokenId="dede2cf5c1a2966453ffec198a9b97b53d281e548903a905519b3525d59cdc3c",rs_TokenIdMap={[rs_RSNTokenId]:"RSN",[rs_eRSNTokenId]:"eRSN"},rs_RSNDecimals=3;var Period;(function(d){d.Day="Day",d.Week="Week",d.Month="Month",d.Year="year",d.All="All"})(Period||(Period={}));var Currency;(function(d){d.EUR="EUR",d.USD="USD",d.ERG="ERG",d.RSN="RSN"})(Currency||(Currency={})),typeof window<"u"&&(globalThis.rs_DbName=rs_DbName,globalThis.rs_DbVersion=rs_DbVersion,globalThis.rs_InputsStoreName=rs_InputsStoreName,globalThis.rs_PerfTxStoreName=rs_PerfTxStoreName,globalThis.rs_PermitTxStoreName=rs_PermitTxStoreName,globalThis.rs_ActivePermitTxStoreName=rs_ActivePermitTxStoreName,globalThis.rs_DownloadStatusStoreName=rs_DownloadStatusStoreName,globalThis.rs_OpenBoxesStoreName=rs_OpenBoxesStoreName,globalThis.rs_AddressDataStoreName=rs_AddressDataStoreName,globalThis.rs_InitialNDownloads=rs_InitialNDownloads,globalThis.rs_FullDownloadsBatchSize=rs_FullDownloadsBatchSize,globalThis.rs_StartFrom=rs_StartFrom,globalThis.rs_Input_Key=rs_Input_Key,globalThis.rs_PerfTx_Key=rs_PerfTx_Key,globalThis.rs_Permit_Key=rs_Permit_Key,globalThis.rs_ActivePermit_Key=rs_ActivePermit_Key,globalThis.rs_Address_Key=rs_Address_Key,globalThis.rs_PermitCost=rs_PermitCost,globalThis.rs_WatcherCollateralRSN=rs_WatcherCollateralRSN,globalThis.rs_WatcherCollateralERG=rs_WatcherCollateralERG,globalThis.rs_PerfInitialNDownloads=rs_PerfInitialNDownloads,globalThis.rs_PerfFullDownloadsBatchSize=rs_PerfFullDownloadsBatchSize,globalThis.rs_ErgoExplorerHost=rs_ErgoExplorerHost,globalThis.rs_ErgoNodeHost=rs_ErgoNodeHost,globalThis.rs_RSNTokenId=rs_RSNTokenId,globalThis.rs_eRSNTokenId=rs_eRSNTokenId,globalThis.rs_TokenIdMap=rs_TokenIdMap,globalThis.rs_RSNDecimals=rs_RSNDecimals,globalThis.currencies=Object.values(Currency),window.Period=Period,window.Currency=Currency);class DataService{constructor(e){this.db=e,this.storageService=new IDBDatabaseStorageService(e)}async purgeData(){}getMaxDownloadDateDifference(){return 315576e7}}class ChainPerformanceDataService extends DataService{async getExistingData(e){return await this.storageService.getDataById(rs_PerfTxStoreName,e.id)}async addData(e,a){const s=[];a.forEach(r=>{const o={},i=r.outputs.reduce((u,w)=>{w.assets.forEach(f=>{f.tokenId!=null&&f.tokenId in rwtTokenIds&&(o[f.tokenId]?o[f.tokenId]++:o[f.tokenId]=1)});const g=w.assets.filter(f=>f.tokenId===rs_eRSNTokenId&&Object.values(rewardAddresses).includes(w.address));return u+g.reduce((f,p)=>f+p.amount/Math.pow(10,rs_RSNDecimals),0)},0),n=Object.entries(o).reduce((u,[w,g])=>g>o[u]?w:u,Object.keys(o)[0]),h=Object.entries(rwtTokenIds).find(([u])=>u===n)?.[1],c={id:r.id,timestamp:r.timestamp,amount:i,chainType:h};s.push(c)}),await this.storageService.addData(rs_PerfTxStoreName,s);const t=await this.getPerfTxs();this.eventSender.sendEvent({type:"PerfChartChanged",data:t})}async getPerfTxs(){const e=this.storageService.getData(rs_PerfTxStoreName);console.log("Retrieving PerfTxs");try{let a=await e;a=a.filter(t=>this.getMaxDownloadDateDifference()>new Date().getTime()-new Date(t.timestamp).getTime());const s=a.reduce((t,r)=>{if(r.chainType!==void 0&&r.chainType!==null){const o=r.chainType;t[o]||(t[o]={chart:0}),t[o].chart+=r.amount??0}return t},{});return Object.fromEntries(Object.values(ChainType).map(t=>[t,s[t]||{chart:0}]))}catch(a){return console.error(a),{}}}constructor(e,a){super(e),this.db=e,this.eventSender=a}getMaxDownloadDateDifference(){return 6048e5}getDataType(){return"performance_chart"}}class RewardDataService extends DataService{async getExistingData(e,a){for(const s of e.inputs)if(s.boxId&&getChainType(s.address)){const t=await this.getDataByBoxId(s.boxId,a);if(t)return t}return null}constructor(e,a,s){super(e),this.db=e,this.chartService=a,this.eventSender=s}getDataType(){return"reward"}async getWatcherInputs(){const e=this.storageService.getData(rs_InputsStoreName);console.log("Retrieving watcher inputs and such");try{const s=(await e).filter(t=>t.chainType!=null||getChainType(t.address)!=null);return s.forEach(t=>{t.assets=t.assets.filter(r=>r.tokenId==rs_RSNTokenId||r.tokenId==rs_eRSNTokenId).map(r=>r)}),s.sort((t,r)=>t.inputDate.getTime()-r.inputDate.getTime()),await new Promise(t=>{t(s)})}catch(a){return console.error(a),[]}}async addData(e,a){const s=[];a.forEach(r=>{r.inputs.forEach(o=>{o.outputAddress=e,o.inputDate=new Date(r.timestamp),o.assets=o.assets.filter(n=>n.tokenId==rs_RSNTokenId||n.tokenId==rs_eRSNTokenId),o.assets.forEach(n=>{n.tokenId&&rs_TokenIdMap[n.tokenId]&&(n.name=rs_TokenIdMap[n.tokenId],n.decimals=rs_RSNDecimals)});const i={outputAddress:o.outputAddress,inputDate:o.inputDate,boxId:o.boxId,assets:o.assets||[],chainType:getChainType(o.address)};i.chainType&&i.assets.length>0&&s.push(i)})}),await this.storageService.addData(rs_InputsStoreName,s);const t=await this.getSortedInputs();this.eventSender.sendEvent({type:"InputsChanged",data:t}),this.eventSender.sendEvent({type:"AddressChartChanged",data:await this.chartService.getAddressCharts(t)})}async getDataByBoxId(e,a){return await this.storageService.getDataById(rs_InputsStoreName,[e,a])}async getSortedInputs(){const e=await this.getWatcherInputs();let a=0;const s=[];console.log("start retrieving chart from database");try{const t=await e;return t.forEach(r=>{r.assets.forEach(o=>{a+=o.amount,s.push({inputDate:r.inputDate,address:r.address??"",assets:r.assets,outputAddress:r.outputAddress,boxId:r.boxId,accumulatedAmount:a,amount:o.amount/Math.pow(10,o.decimals),chainType:r.chainType??getChainType(r.address)})})}),console.log("done retrieving chart from database "+t.length+" inputs"),await new Promise(r=>{r(s)})}catch(t){return console.error(t),s}}}class ChartService{async getAddressCharts(e){const a={};return e.forEach(s=>{s.assets.forEach(t=>{a[s.outputAddress]||(a[s.outputAddress]={charts:{},chainType:null});const r=new Date,o=new Date(r.getFullYear(),r.getMonth()-6,r.getDate());if(s.inputDate>o){const i=new Date(s.inputDate.getFullYear(),s.inputDate.getMonth(),s.inputDate.getDate()-s.inputDate.getDay()).getTime();a[s.outputAddress].charts[i]||(a[s.outputAddress].charts[i]=0),a[s.outputAddress].charts[i]+=t.amount/Math.pow(10,t.decimals),a[s.outputAddress].chainType=s.chainType??getChainType(s.address)}})}),a}async getAmountsByDate(e,a){return this.reduceData(e,a).map(r=>({x:r.inputDate,y:r.amount}))}reduceData(e,a){const s=new Date;switch(a){case"Day":s.setDate(s.getDate()-1);break;case"Week":s.setDate(s.getDate()-7);break;case"Month":s.setMonth(s.getMonth()-1);break;case"Year":s.setFullYear(s.getFullYear()-1);break;default:s.setFullYear(s.getFullYear()-100)}return e=e.filter(t=>t.inputDate>=s),e}}class DownloadService{constructor(e,a,s,t,r){this.dataService=s,this.eventSender=t,this.downloadStatusIndexedDbService=r,this.busyCounter=0,this.downloadFullSize=rs_FullDownloadsBatchSize,this.downloadInitialSize=rs_InitialNDownloads,this.downloadFullSize=e,this.downloadInitialSize=a}async fetchTransactions(e){try{const a=await fetch(e);if(!a.ok)throw new Error(`Server returned code: ${a.status}`);return await a.json()}catch(a){throw console.error(`An error occurred: ${a}`),a}}async downloadTransactions(e,a=0,s=500,t){if(t){const r=`https://${rs_ErgoNodeHost}/blockchain/transaction/byAddress?offset=${a}&limit=${s}`;console.log(`Downloading from: ${r}`);const o=await fetch(r,{method:"POST",headers:{"Content-Type":"text/plain"},body:e});if(!o.ok)throw new Error(`Server returned code: ${o.status}`);const i=await o.json(),n={transactions:i.items,total:i.total,items:[]};for(const h of i.items)if(new Date(h.timestamp)<rs_StartFrom)return n;return n}else{const r=`https://${rs_ErgoExplorerHost}/api/v1/addresses/${e}/transactions?offset=${a}&limit=${s}`;console.log(`Downloading from: ${r}`);const o=await this.fetchTransactions(r),i={transactions:o.items,total:o.total,items:[]};for(const n of o.items)if(new Date(n.timestamp)<rs_StartFrom)return i;return i}}async downloadForAddresses(){console.log("Start downloading for all addresses");try{const a=(await this.dataService.storageService.getData(rs_AddressDataStoreName)).map(async s=>{await this.downloadForAddress(s.address,!0)});await Promise.all(a)}catch(e){console.error("Error downloading for addresses:",e)}finally{console.log("End downloading for all addresses")}}increaseBusyCounter(e){this.busyCounter===0&&this.eventSender.sendEvent({type:"StartFullDownload",data:e}),this.busyCounter++}decreaseBusyCounter(e){this.busyCounter--,this.busyCounter===0&&this.eventSender.sendEvent({type:"EndFullDownload",data:e})}async downloadAllForAddress(e,a,s,t){this.increaseBusyCounter(e),console.log(this.busyCounter);try{const r=await this.downloadTransactions(e,a,this.downloadFullSize+10,s);if(console.log(`Processing full download(offset = ${a}, size = ${this.downloadFullSize}) for: ${e}`),!r.transactions||r.transactions.length===0||a>1e5){await this.downloadStatusIndexedDbService.setDownloadStatus(e,"true"),console.log(this.busyCounter);return}await this.dataService.addData(e,r.transactions),t&&await t?.(),this.dataService.getMaxDownloadDateDifference()>new Date().getTime()-new Date(r.transactions[r.transactions.length-1].timestamp).getTime()?await this.downloadAllForAddress(e,a+this.downloadFullSize,s):await this.downloadStatusIndexedDbService.setDownloadStatus(e,"true")}catch(r){console.error(r)}finally{this.decreaseBusyCounter(e),console.log(this.busyCounter)}}async downloadForAddress(e,a,s){this.increaseBusyCounter(e),console.log(this.busyCounter);try{const t=await this.downloadTransactions(e,0,this.downloadInitialSize,a);console.log(`Processing initial download(size = ${this.downloadInitialSize}) for: ${e}`);const r=t.transactions.length;let o=null;if(r>this.downloadInitialSize/4)for(let n=Math.floor(r/4);n<r-Math.floor(r/4);n++){const h=t.transactions[n];if(o=await this.dataService.getExistingData(h,e),o)break}console.log("Add bunch of data"),await this.dataService.addData(e,t.transactions),s&&await s?.();const i=(await this.downloadStatusIndexedDbService.getDownloadStatus(e))?.status||"false";o&&i==="true"?console.log(`Found existing boxId in db for ${e}, no need to download more.`):r>=this.downloadInitialSize&&(await this.downloadStatusIndexedDbService.setDownloadStatus(e,"false"),console.log(`Downloading all tx's for : ${e}`),await this.downloadAllForAddress(e,0,a,s))}catch(t){console.error(t)}finally{this.decreaseBusyCounter(e),this.dataService.purgeData(),console.log(this.busyCounter)}}}class ServiceWorkerEventSender{async sendEvent(e){const a=await self.clients.matchAll({type:"window",includeUncontrolled:!0});for(const s of a)s.postMessage(e)}}class ProcessEventService{constructor(e){this.eventSender=e,this.services=null}async initServices(){const e=await this.initIndexedDB(),a=new ChartService,s=new RewardDataService(e,a,this.eventSender),t=new ActivePermitsDataService(e),r=new MyWatcherDataService(e,t),o=new ChainPerformanceDataService(e,this.eventSender),i=new DownloadStatusIndexedDbService(s,e),n=new DownloadStatusIndexedDbService(r,e),h=new DownloadStatusIndexedDbService(t,e),c=new DownloadStatusIndexedDbService(o,e),u=new DownloadService(rs_FullDownloadsBatchSize,rs_InitialNDownloads,s,this.eventSender,i),w=new DownloadService(rs_FullDownloadsBatchSize,rs_InitialNDownloads,r,this.eventSender,n),g=new DownloadService(rs_FullDownloadsBatchSize,rs_InitialNDownloads,t,this.eventSender,h),f=new DownloadService(rs_PerfFullDownloadsBatchSize,rs_PerfInitialNDownloads,o,this.eventSender,c);return this.services={dataService:s,chainPerformanceDataService:o,myWatcherDataService:r,downloadService:u,chartService:a,downloadPerfService:f,downloadMyWatchersService:w,downloadActivePermitsService:g,activePermitsDataService:t},this.services}async processEvent(e){if(e.type==="StatisticsScreenLoaded"||e.type==="PerformanceScreenLoaded"||e.type==="MyWatchersScreenLoaded"||e.type==="RequestInputsDownload"){const{dataService:a,downloadService:s,downloadPerfService:t,downloadMyWatchersService:r,downloadActivePermitsService:o,chartService:i,chainPerformanceDataService:n,myWatcherDataService:h,activePermitsDataService:c}=await this.initServices();e.type==="RequestInputsDownload"?await this.processRequestInputsDownload(e,i,a,s):e.type==="StatisticsScreenLoaded"?await this.processStatisticsScreenLoaded(a,s):e.type==="MyWatchersScreenLoaded"?await this.processMyWatchersScreenLoaded(e,h,r,c,o):e.type==="PerformanceScreenLoaded"&&await this.processPerformanceScreenLoaded(n,t)}}async processPerformanceScreenLoaded(e,a){console.log("Rosen service worker received PerformanceScreenLoaded");try{console.log("Downloading perftxs.");const s=await e.getPerfTxs();this.eventSender.sendEvent({type:"PerfChartChanged",data:s}),a.downloadForAddress(hotWalletAddress,!0)}catch(s){console.error("Error initializing IndexedDB or downloading addresses:",s)}}async processMyWatchersScreenLoaded(e,a,s,t,r){const o=e.data.addresses;console.log("Rosen service worker received MyWatchersScreenLoaded initiating syncing of data by downloading from blockchain");try{let i=await a.getAdressPermits(o),n=this.extractChaintTypes(i,o);if(this.sendPermitsChangedEvent(i),n.size===0){await this.downloadForChainPermitAddresses(o,s,a),i=await this.sendPermitChangedEvent(a,o);let h=this.extractChaintTypes(i,o);await this.processActivePermits(h,t,a,o,r)}else{await this.processActivePermits(n,t,a,o,r),await this.downloadForChainPermitAddresses(o,s,a),await this.sendPermitChangedEvent(a,o);let h=this.extractChaintTypes(await a.getAdressPermits(o),o);(h.size!==n.size||[...h].some(c=>!n.has(c)))&&await this.processActivePermits(h,t,a,o,r)}}catch(i){console.error("Error initializing IndexedDB or downloading addresses:",i)}}extractChaintTypes(e,a){let s=new Set;for(const t of Object.values(e))t&&t.chainType&&a.includes(t.address)&&s.add(t.chainType);return s}async processActivePermits(e,a,s,t,r){await Promise.all(Array.from(e).map(async o=>{await a.downloadOpenBoxes(o)})),await this.sendPermitChangedEvent(s,t),await Promise.all(Array.from(e).map(async o=>{await this.downloadForActivePermitAddresses(t,o,r,s)}))}async downloadForChainPermitAddresses(e,a,s){try{const t=Object.entries(permitAddresses).filter(([,r])=>r!=null).map(async([r,o])=>{await a.downloadForAddress(o,!0);const i=await s.getAdressPermits(e);await this.eventSender.sendEvent({type:"PermitsChanged",data:i}),await this.eventSender.sendEvent({type:"AddressPermitsDownloaded",data:r})});await Promise.all(t)}catch(t){console.error("Error downloading for addresses:",t)}}async sendPermitChangedEvent(e,a){let s=await e.getAdressPermits(a);return this.eventSender.sendEvent({type:"PermitsChanged",data:s}),s}sendPermitsChangedEvent(e){this.eventSender.sendEvent({type:"PermitsChanged",data:e})}async processStatisticsScreenLoaded(e,a){console.log("Rosen service worker received StatisticsScreenLoaded initiating syncing of data by downloading from blockchain");try{const s=await e.getSortedInputs();this.eventSender.sendEvent({type:"InputsChanged",data:s}),await a.downloadForAddresses()}catch(s){console.error("Error initializing IndexedDB or downloading addresses:",s)}}async downloadForActivePermitAddresses(e,a,s,t){try{let r=[];Object.entries(permitTriggerAddresses).forEach(([i,n])=>{i===a&&n!=null&&r.push(n)});const o=r.map(async i=>{await s.downloadForAddress(i,!0,async()=>{try{const n=await t.getAdressPermits(e);await this.eventSender.sendEvent({type:"PermitsChanged",data:n})}catch(n){console.error("Error in permits callback:",n)}})});await Promise.all(o)}catch(r){console.error("Error downloading for addresses:",r)}}async processRequestInputsDownload(e,a,s,t){console.log("Rosen service worker received RequestInputsDownload initiating syncing of data by downloading from blockchain, event.data: "+e.data);try{const r=await a.getAddressCharts(await s.getSortedInputs());this.eventSender.sendEvent({type:"AddressChartChanged",data:r}),e.data&&typeof e.data=="string"?await t.downloadForAddress(e.data,!0):await t.downloadForAddresses()}catch(r){console.error("Error initializing IndexedDB or downloading addresses:",r)}}async initIndexedDB(){return new Promise((e,a)=>{let s=rs_DbName;const t=indexedDB.open(s);t.onsuccess=r=>{const o=r.target.result;e(o)},t.onerror=r=>{console.error("Error opening IndexedDB:",r.target.error),a(r.target.error)}})}}typeof window<"u"&&(window.ProcessEventService=ProcessEventService,globalThis.CreateProcessEventService=d=>new ProcessEventService(d));class MyWatcherDataService extends DataService{async getExistingData(e,a){for(const s of e.inputs)if(s.boxId){const t=await this.storageService.getDataById(rs_PermitTxStoreName,this.createUniqueId(s.boxId,e.id,a));if(t)return t}for(const s of e.outputs)if(s.boxId){const t=await this.storageService.getDataById(rs_PermitTxStoreName,this.createUniqueId(s.boxId,e.id,a));if(t)return t}return null}constructor(e,a){super(e),this.db=e,this.activePermitsDataService=a}createUniqueId(e,a,s){const t=`${a}_${e}_${s}`;let r=0,o,i;for(o=0;o<t.length;o++)i=t.charCodeAt(o),r=(r<<5)-r+i,r|=0;return r.toString()}getDataType(){return"permit"}async getWatcherPermits(){const e=this.storageService.getData(rs_PermitTxStoreName);console.log("Retrieving watcher permits and such");try{const a=await e;return a.forEach(s=>{s.assets=s.assets.filter(t=>t.tokenId==rs_RSNTokenId).map(t=>t)}),a.sort((s,t)=>t.date.getTime()-s.date.getTime()),await new Promise(s=>{s(a)})}catch(a){return console.error(a),[]}}shouldAddToDb(e,a){return e!=null&&e.length>0&&e.length<=100&&a.some(s=>s.tokenId==rs_RSNTokenId)}async getAdressPermits(e){const a=await this.getWatcherPermits(),s={},t=[];for(const o of a){const i=o.assets.reduce((n,h)=>h.tokenId==rs_RSNTokenId?n+h.amount/Math.pow(10,rs_RSNDecimals):n,0);s[o.wid]?s[o.wid]+=i:s[o.wid]=i}for(const o of a)t.some(i=>i.address==o.address)||t.push({address:o.address,wid:o.wid,lockedRSN:s[o.wid]||0,activeLockedRSN:0,chainType:o.chainType});let r=await this.activePermitsDataService.getAdressActivePermits(e);for(const o of r){const i=t.find(n=>n.address===o.address);i&&(i.activeLockedRSN+=rs_PermitCost)}return t}async addData(e,a){const s=[];a.forEach(t=>{let r=t.inputs.flatMap(n=>n.assets).filter(n=>n.amount==2||n.amount==3).flatMap(n=>n.tokenId),o=t.outputs.flatMap(n=>n.assets).filter(n=>n.amount==2||n.amount==3).flatMap(n=>n.tokenId);const i=Array.from(new Set([...r,...o]));t.inputs.forEach(n=>{if(this.shouldAddToDb(n.address,n.assets)===!1)return;n.inputDate=new Date(t.timestamp),n.assets=n.assets.filter(c=>c.tokenId==rs_RSNTokenId||c.amount==2||c.amount==3);let h;for(h of i){const c={id:this.createUniqueId(n.boxId,t.id,e),address:n.address,date:n.inputDate,boxId:n.boxId,assets:n.assets||[],wid:h??"",chainType:getChainTypeForPermitAddress(e),transactionId:t.id};c.assets.length>0&&s.push(c)}}),t.outputs.forEach(n=>{if(this.shouldAddToDb(n.address,n.assets)===!1)return;n.outputDate=new Date(t.timestamp),n.assets=n.assets.filter(c=>c.tokenId==rs_RSNTokenId||c.amount==2||c.amount==3),n.assets.forEach(c=>{c.amount=-c.amount});let h;for(h of i){const c={id:this.createUniqueId(n.boxId,t.id,e),address:n.address,date:n.outputDate,boxId:n.boxId,assets:n.assets||[],wid:h??"",chainType:getChainTypeForPermitAddress(e),transactionId:t.id};c.assets.length>0&&s.push(c)}})}),await this.storageService.addData(rs_PermitTxStoreName,s)}async getSortedPermits(){const e=await this.getWatcherPermits(),a=[];console.log("start retrieving permits from database");try{const s=await e;return s.forEach(t=>{a.push({id:t.id,date:t.date,address:t.address,assets:t.assets,wid:t.wid,boxId:t.boxId,chainType:t.chainType??getChainTypeForPermitAddress(t.address),transactionId:t.transactionId})}),console.log("done retrieving permits from database "+s.length+" permits"),await new Promise(t=>{t(a)})}catch(s){return console.error(s),a}}}class ActivePermitsDataService extends DataService{async getExistingData(e,a){for(const s of e.inputs)if(s.boxId){const t=await this.storageService.getDataById(rs_ActivePermitTxStoreName,this.createUniqueId(s.boxId,e.id,a));if(t)return t}for(const s of e.outputs)if(s.boxId){const t=await this.storageService.getDataById(rs_ActivePermitTxStoreName,this.createUniqueId(s.boxId,e.id,a));if(t)return t}return null}constructor(e){super(e),this.db=e}createUniqueId(e,a,s){const t=`${a}_${e}_${s}`;let r=0,o,i;for(o=0;o<t.length;o++)i=t.charCodeAt(o),r=(r<<5)-r+i,r|=0;return r.toString()}getDataType(){return"activepermit"}getMaxDownloadDateDifference(){return 2048e5}async getWatcherPermits(){const e=this.storageService.getData(rs_ActivePermitTxStoreName);console.log("Retrieving watcher active permits");try{const a=await e;return a.forEach(s=>{s.assets=s.assets.filter(t=>t.tokenId!=null&&t.tokenId in rwtTokenIds).map(t=>t)}),a.sort((s,t)=>t.date.getTime()-s.date.getTime()),await new Promise(s=>{s(a)})}catch(a){return console.error(a),[]}}async downloadOpenBoxes(e){let a=[];Object.entries(permitBulkAddresses).forEach(([t,r])=>{t===e&&r!=null&&a.push(r)});const s=a.map(async t=>{let r="https://api.ergoplatform.com/api/v1/boxes/unspent/byAddress/"+t;const o=await fetch(r);if(!o.ok)throw new Error(`Server returned code: ${o.status}`);await this.saveOpenBoxes(t,await o.json())});await Promise.all(s)}async saveOpenBoxes(e,a){const s={address:e,openBoxesJson:a};await this.storageService.addData(rs_OpenBoxesStoreName,[s])}async getOpenBoxesMap(){const e={},a=this.storageService.getData(rs_OpenBoxesStoreName);for(const[,t]of Object.entries(permitBulkAddresses))if(t){var s=(await a).filter(r=>r.address===t);s.length!=0?e[t]=JSON.stringify(s):e[t]=null}return e}shouldAddInputToDb(e,a){return e!=null&&e.length<=100&&a.length>0||Object.values(permitTriggerAddresses).includes(e)}shouldAddOutputToDb(e){return Object.values(permitBulkAddresses).includes(e)||Object.values(permitTriggerAddresses).includes(e)||Object.values(rewardAddresses).includes(e)}async getAdressActivePermits(e=null){const a=await this.getWatcherPermits(),s=await this.getOpenBoxesMap();let t=new Array;e!=null&&e.length>0&&(t=a.filter(c=>e.some(u=>u===c.address)));let r=new Array;const o={};for(const c of a)o[c.transactionId]||(o[c.transactionId]=[]),o[c.transactionId].push(c);const i={};for(const c of a)i[c.boxId]||(i[c.boxId]=[]),i[c.boxId].push(c);for(const c of t){let u=(o[c.transactionId]??[]).filter(g=>Object.values(permitTriggerAddresses).some(f=>f===g.address)),w=!1;for(const g of u){let f=i[g.boxId]??[];if(f.length>=2){w=!0;for(const p of f){let v=o[p.transactionId]?.filter(m=>Object.values(permitBulkAddresses).includes(m.address))??[];await Promise.all(v.map(async m=>{let l=s[m.address];l&&l.indexOf(m.boxId)!==-1&&(r.some(S=>S.boxId===m.boxId)||r.push(c))}))}}}w===!1&&r.push(c)}const n=new Set;return r.filter(c=>n.has(c.transactionId)?!1:(n.add(c.transactionId),!0))}async addData(e,a){const s=[],t=Date.now();let r=this.getMaxDownloadDateDifference();a.forEach(o=>{o.inputs.forEach(i=>{if(this.shouldAddInputToDb(i.address,i.assets)===!1)return;i.inputDate=new Date(o.timestamp),i.assets=i.assets.filter(h=>h.tokenId!=null&&h.tokenId in rwtTokenIds);const n={id:this.createUniqueId(i.boxId,o.id,e),address:i.address,date:i.inputDate,boxId:i.boxId,assets:i.assets||[],wid:"",chainType:getChainTypeForPermitAddress(e),transactionId:o.id};n!=null&&n.date&&t-new Date(n.date).getTime()<=r*2&&s.push(n)}),o.outputs.forEach(i=>{if(this.shouldAddOutputToDb(i.address)===!1)return;i.outputDate=new Date(o.timestamp),i.assets=i.assets.filter(h=>h.tokenId!=null&&h.tokenId in rwtTokenIds),i.assets.forEach(h=>{h.amount=-h.amount});const n={id:this.createUniqueId(i.boxId,o.id,e),address:i.address,date:i.outputDate,boxId:i.boxId,assets:i.assets||[],wid:"",chainType:getChainTypeForPermitAddress(e),transactionId:o.id};n!=null&&n.date&&t-new Date(n.date).getTime()<=r*2&&s.push(n)})}),await this.storageService.addData(rs_ActivePermitTxStoreName,s)}async purgeData(){let e=await this.storageService.getData(rs_ActivePermitTxStoreName);e=(await e).sort((o,i)=>new Date(o.date).getTime()-new Date(i.date).getTime());let a=null;e.length>=rs_FullDownloadsBatchSize?a=e[rs_FullDownloadsBatchSize-1]:a=e[e.length-1];let s=this.getMaxDownloadDateDifference();const t=Date.now();a!=null&&t-a.date.getTime()>s&&(s=t-a.date.getTime());var r=[];for(const o of e)o.date&&t-new Date(o.date).getTime()>s&&r.push(o);await this.storageService.deleteData(rs_ActivePermitTxStoreName,r.map(o=>o.id))}async getSortedPermits(){const e=await this.getWatcherPermits(),a=[];console.log("start retrieving permits from database");try{const s=await e;return s.forEach(t=>{a.push({id:t.id,date:t.date,address:t.address,assets:t.assets,wid:t.wid,boxId:t.boxId,transactionId:t.transactionId,chainType:t.chainType??getChainTypeForPermitAddress(t.address)})}),console.log("done retrieving permits from database "+s.length+" permits"),await new Promise(t=>{t(a)})}catch(s){return console.error(s),a}}}class IDBDatabaseStorageService{constructor(e){this.db=e}async getData(e){return new Promise((a,s)=>{const t=typeof performance<"u"&&performance.now?performance.now():Date.now(),r=`StorageService:getData(${e})`,n=this.db.transaction([e],"readonly").objectStore(e).getAll();n.onsuccess=()=>{const h=n.result,c=typeof performance<"u"&&performance.now?performance.now():Date.now(),u=Math.round(c-t);console.log(`${r} - loaded ${h.length} items in ${u}ms`),a(h)},n.onerror=h=>s(h.target.error)})}async getDataById(e,a){return new Promise((s,t)=>{const i=this.db.transaction([e],"readonly").objectStore(e).get(a);i.onsuccess=()=>{const n=i.result;s(n??null)},i.onerror=n=>t(n.target.error)})}async addData(e,a){return new Promise((s,t)=>{const o=this.db.transaction([e],"readwrite").objectStore(e);Promise.all(a.map(i=>new Promise((n,h)=>{const c=o.put(i);c.onsuccess=()=>n(),c.onerror=u=>h(u.target.error)}))).then(()=>s()).catch(t)})}async deleteData(e,a){const s=Array.isArray(a)?a:[a];return new Promise((t,r)=>{const i=this.db.transaction([e],"readwrite").objectStore(e);Promise.all(s.map(n=>new Promise((h,c)=>{const u=i.delete(n);u.onsuccess=()=>h(),u.onerror=w=>c(w.target.error)}))).then(()=>t()).catch(r)})}}
